/*

    Copyright Â© 2016-2017 Dominique Climent, Florian Dubath

    This file is part of Monnaie-Leman Wallet.

    Monnaie-Leman Wallet is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Monnaie-Leman Wallet is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Monnaie-Leman Wallet.  If not, see <http://www.gnu.org/licenses/>.

*/
var test = require('tap').test
var semver = require('../')

test('long version is too long', function (t) {
  var v = '1.2.' + new Array(256).join('1')
  t.throws(function () {
    new semver.SemVer(v)
  })
  t.equal(semver.valid(v, false), null)
  t.equal(semver.valid(v, true), null)
  t.equal(semver.inc(v, 'patch'), null)
  t.end()
})

test('big number is like too long version', function (t) {
  var v = '1.2.' + new Array(100).join('1')
  t.throws(function () {
    new semver.SemVer(v)
  })
  t.equal(semver.valid(v, false), null)
  t.equal(semver.valid(v, true), null)
  t.equal(semver.inc(v, 'patch'), null)
  t.end()
})

test('parsing null does not throw', function (t) {
  t.equal(semver.parse(null), null)
  t.equal(semver.parse({}), null)
  t.equal(semver.parse(new semver.SemVer('1.2.3')).version, '1.2.3')
  t.end()
})
